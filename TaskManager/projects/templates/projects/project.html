{% extends 'base.html' %}
{% load static %}

{% block content %}
<div class="prform-card">
    <div class="prform-form">
        <!-- –õ–µ–≤–∞—è –∫–æ–ª–æ–Ω–∫–∞: –∑–∞–¥–∞—á–∏ -->
        <div class="prform-left">
            <!-- –ö–Ω–æ–ø–∫–∏ –∑–∞–¥–∞—á -->
            {% for task in tasks %}
                <a class="prform-task-entry" href="{% url 'app_tasks:task_view' task.slug %}">
                    <button class="prform-task-btn"><span>{{ task.title }}</span></button>
                </a><br>
            {% endfor %}

            <!-- –ö–Ω–æ–ø–∫–∞ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –∑–∞–¥–∞—á–∏ -->
            <a href="{% url 'app_tasks:task_create' %}?project={{ project.slug }}" class="prform-add-task">–î–æ–±–∞–≤–∏—Ç—å –∑–∞–¥–∞—á–∏</a>
        </div>

        <!-- –¶–µ–Ω—Ç—Ä: –Ω–∞–∑–≤–∞–Ω–∏–µ, –æ–ø–∏—Å–∞–Ω–∏–µ, –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π –∏ –°–¢–ê–¢–£–° -->
        <div class="prform-center">
            <form method="post">
                {% csrf_token %}

                <!-- –ù–∞–∑–≤–∞–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞ -->
                <div class="prform-field">
                    <label class="prform-label" for="{{ form.title.id_for_label }}">{{ form.title.label }}</label>
                    {{ form.title }}
                </div>

                <!-- –û–ø–∏—Å–∞–Ω–∏–µ -->
                <div class="prform-field">
                    <label class="prform-label" for="{{ form.description.id_for_label }}">{{ form.description.label }}</label>
                    {{ form.description }}
                </div>

                <!-- –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π -->
                <div class="prform-field">
                    <label class="prform-label" for="{{ form.comment.id_for_label }}">{{ form.comment.label }}</label>
                    {{ form.comment }}
                </div>

                <!-- –°—Ç–∞—Ç—É—Å (—Ç–æ–ª—å–∫–æ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ) -->
                <div class="prform-status-badge">
                    –°—Ç–∞—Ç—É—Å –ø—Ä–æ–µ–∫—Ç–∞: {{ project.get_status_display }}
                </div>

                <button type="submit" class="save-btn">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
            </form>
        </div>

        <!-- –ü—Ä–∞–≤–∞—è –∫–æ–ª–æ–Ω–∫–∞: —É—á–∞—Å—Ç–Ω–∏–∫–∏ –∏ –¥–µ–π—Å—Ç–≤–∏—è -->
        <div class="prform-right">
            <div class="prform-field">
                <p class="prform-label">–£—á–∞—Å—Ç–Ω–∏–∫–∏ –ø—Ä–æ–µ–∫—Ç–∞:</p>
                <ul class="prform-members">
                    {% for member in members %}
                        <li>üë§ {{ member.user.username }}: {{ member.get_user_role_display }}</li>
                    {% empty %}
                        <li>–ù–µ—Ç —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤</li>
                    {% endfor %}
                </ul>
            </div>

            {% if project.status == "PUBLIC" %}
                <a class="prform-action-btn" href="{% url 'app_projects:add_members' project.slug %}">–î–æ–±–∞–≤–∏—Ç—å —É—á–∞—Å—Ç–Ω–∏–∫–∞</a>
            {% endif %}

            <form method="POST" action="{% url 'app_projects:project_delete' project.slug %}">
                {% csrf_token %}
                <input type="submit" value="–£–¥–∞–ª–∏—Ç—å" class="del-btn">
            </form>
        </div>
    </div>
</div>

<!-- –ö–Ω–æ–ø–∫–∞ –≤–Ω–µ –∫–∞—Ä—Ç–æ—á–∫–∏ -->
<div class="back-btn-container">
    <a href="{% url 'app_projects:projects_list' %}" class="prform-back-btn">–í–µ—Ä–Ω—É—Ç—å—Å—è –æ–±—Ä–∞—Ç–Ω–æ</a>
</div>
{% endblock %}
